{% extends "base.html" %}

{% block content %}
<div class="app-container">
    <header class="app-header">
        <h1>방화벽 정책 관리</h1>
    </header>

    <main class="task-list">
        <!-- Phase 1: 방화벽 설정 -->
        <div class="task-card" id="phase1">
            <div class="task-header">
                <h2>방화벽 설정</h2>
                <span class="task-status">대기중</span>
            </div>
            <div class="task-content">
                <form id="firewallConnectionForm" class="connection-form">
                    <div class="form-row vendor-row">
                        <div class="form-group">
                            <select id="vendor" name="vendor" required>
                                <option value="">벤더 선택</option>
                                <option value="paloalto">팔로알토</option>
                                <option value="secui">시큐아이</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row inputs-row">
                        <div class="form-group">
                            <input type="text" id="primary_ip" name="primary_ip" required 
                                   placeholder="Primary IP">
                        </div>
                        <div class="form-group">
                            <input type="text" id="secondary_ip" name="secondary_ip" 
                                   placeholder="Secondary IP (선택)">
                        </div>
                        <div class="form-group">
                            <input type="text" id="username" name="username" required 
                                   placeholder="계정">
                        </div>
                        <div class="form-group">
                            <input type="password" id="password" name="password" required 
                                   placeholder="비밀번호">
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn save-btn" onclick="saveConnection()">저장</button>
                            <button type="button" class="btn reset-btn" onclick="resetForm()">리셋</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!-- Phase 2: 데이터 수집 -->
        <div class="task-card" id="phase2">
            <div class="task-header">
                <h2>데이터 수집</h2>
                <span class="task-status">대기중</span>
            </div>
            <div class="task-content">
                <div class="task-list">
                    <!-- 정책 추출 -->
                    <div class="task-row" data-task="policy">
                        <div class="task-label">방화벽 정책 가져오기</div>
                        <div class="task-controls">
                            <button class="btn run-btn" onclick="runTask('policy')">실행</button>
                        </div>
                    </div>

                    <!-- 사용이력 추출 -->
                    <div class="task-row" data-task="usage">
                        <div class="task-label">방화벽 사용이력 가져오기</div>
                        <div class="task-controls">
                            <button class="btn run-btn" onclick="runTask('usage')">실행</button>
                        </div>
                    </div>

                    <!-- 중복정책 추출 -->
                    <div class="task-row" data-task="duplicate">
                        <div class="task-label">방화벽 중복 정책 분석하기</div>
                        <div class="task-controls">
                            <button class="btn run-btn" onclick="runTask('duplicate')">실행</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>
{% endblock %} 